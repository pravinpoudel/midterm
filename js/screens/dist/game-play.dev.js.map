{"version":3,"sources":["game-play.js"],"names":["GamePlay","manager","input","myKeyboard","lastTimeStamp","meter","marker","initialize","bind","run","checkHandler","self","register","GameState","cancelNextRequest","showScreen","Meter","Marker","elapsedTime","update","document","getElementById","innerHTML","score","context","clearRect","canvas","width","height","render","renderScore","checkMarker","performance","now","gameLoop","time","processInput","requestAnimationFrame","font","textAlign","fillText"],"mappings":";;;;;;;;IAAMA,Q;;;AACJ,oBAAYC,OAAZ,EAAqBC,KAArB,EAA4B;AAAA;;AAC1B,SAAKC,UAAL,GAAkBD,KAAlB;AACA,SAAKE,aAAL;AACA,SAAKH,OAAL,GAAeA,OAAf;AACA,SAAKI,KAAL,GAAa,IAAb;AACA,SAAKC,MAAL,GAAc,IAAd;AACA,SAAKC,UAAL,GAAkB,KAAKA,UAAL,CAAgBC,IAAhB,CAAqB,IAArB,CAAlB;AACA,SAAKC,GAAL,GAAW,KAAKA,GAAL,CAASD,IAAT,CAAc,IAAd,CAAX;AACA,SAAKE,YAAL,GAAoB,KAAKA,YAAL,CAAkBF,IAAlB,CAAuB,IAAvB,CAApB;AACD;;;;iCAEY;AACX,UAAIG,IAAI,GAAG,IAAX;AACAA,MAAAA,IAAI,CAACR,UAAL,CAAgBS,QAAhB,CAAyB,QAAzB,EAAmC,YAAY;AAC7CC,QAAAA,SAAS,CAACC,iBAAV,GAA8B,IAA9B;AACAH,QAAAA,IAAI,CAACV,OAAL,CAAac,UAAb,CAAwB,UAAxB;AACD,OAHD;AAIA,WAAKV,KAAL,GAAa,IAAIW,KAAJ,EAAb;AACA,WAAKV,MAAL,GAAc,IAAIW,MAAJ,EAAd;AACD;;;iCAEYC,W,EAAa;AACxB,WAAKf,UAAL,CAAgBgB,MAAhB,CAAuBD,WAAvB;AACD;;;2BAEMA,W,EAAa;AAClB,WAAKZ,MAAL,CAAYa,MAAZ,CAAmBD,WAAnB;AACD;;;kCAEa;AACZE,MAAAA,QAAQ,CAACC,cAAT,CAAwB,cAAxB,EAAwCC,SAAxC,GAAoDC,KAApD;AACD;;;6BAEQ;AACPC,MAAAA,OAAO,CAACC,SAAR,CAAkB,CAAlB,EAAqB,CAArB,EAAwBC,MAAM,CAACC,KAA/B,EAAsCD,MAAM,CAACE,MAA7C;AACA,WAAKvB,KAAL,CAAWwB,MAAX;AACA,WAAKvB,MAAL,CAAYuB,MAAZ;AACA,WAAKC,WAAL;AACD;;;iCAEYZ,W,EAAY;AACvB,UAAG,KAAKb,KAAL,CAAW0B,WAAX,CAAuB,KAAKzB,MAA5B,CAAH,EAAuC;AACrC,aAAKA,MAAL,GAAa,IAAIW,MAAJ,EAAb;AACH;AACA;;;0BAEK;AACJ,UAAIN,IAAI,GAAG,IAAX;AACA,UAAIP,aAAa,GAAG4B,WAAW,CAACC,GAAZ,EAApB;AACApB,MAAAA,SAAS,CAACC,iBAAV,GAA8B,KAA9B;AAEA,WAAKX,UAAL,CAAgBS,QAAhB,CAAyB,GAAzB,EAA8B,KAAKF,YAAnC;;AACA,eAASwB,QAAT,CAAkBC,IAAlB,EAAwB;AACtBxB,QAAAA,IAAI,CAACyB,YAAL,CAAkBD,IAAI,GAAG/B,aAAzB;AACAO,QAAAA,IAAI,CAACQ,MAAL,CAAYgB,IAAI,GAAG/B,aAAnB;AACAA,QAAAA,aAAa,GAAG+B,IAAhB;AACAxB,QAAAA,IAAI,CAACkB,MAAL;;AACA,YAAI,CAAChB,SAAS,CAACC,iBAAf,EAAkC;AAChCuB,UAAAA,qBAAqB,CAACH,QAAD,CAArB;AACD,SAFD,MAEO;AACLV,UAAAA,OAAO,CAACc,IAAR,GAAe,aAAf;AACAd,UAAAA,OAAO,CAACe,SAAR,GAAoB,QAApB;AACAf,UAAAA,OAAO,CAACgB,QAAR,CAAiB,WAAjB,EAA8Bd,MAAM,CAACC,KAAP,GAAe,CAA7C,EAAgDD,MAAM,CAACE,MAAP,GAAgB,GAAhE,EAHK,CAIL;AACD;AACF;;AACDS,MAAAA,qBAAqB,CAACH,QAAD,CAArB;AACD","sourcesContent":["class GamePlay {\r\n  constructor(manager, input) {\r\n    this.myKeyboard = input;\r\n    this.lastTimeStamp;\r\n    this.manager = manager;\r\n    this.meter = null;\r\n    this.marker = null;\r\n    this.initialize = this.initialize.bind(this);\r\n    this.run = this.run.bind(this);\r\n    this.checkHandler = this.checkHandler.bind(this);\r\n  }\r\n\r\n  initialize() {\r\n    let self = this;\r\n    self.myKeyboard.register(\"Escape\", function () {\r\n      GameState.cancelNextRequest = true;\r\n      self.manager.showScreen(\"mainmenu\");\r\n    });\r\n    this.meter = new Meter();\r\n    this.marker = new Marker();\r\n  }\r\n\r\n  processInput(elapsedTime) {\r\n    this.myKeyboard.update(elapsedTime);\r\n  }\r\n\r\n  update(elapsedTime) {\r\n    this.marker.update(elapsedTime)\r\n  }\r\n  \r\n  renderScore() {\r\n    document.getElementById(\"currentScore\").innerHTML = score;\r\n  }\r\n\r\n  render() {\r\n    context.clearRect(0, 0, canvas.width, canvas.height);\r\n    this.meter.render();\r\n    this.marker.render();\r\n    this.renderScore();\r\n  }\r\n\r\n  checkHandler(elapsedTime){\r\n    if(this.meter.checkMarker(this.marker)){\r\n      this.marker= new Marker();\r\n  }\r\n  }\r\n\r\n  run() {\r\n    let self = this;\r\n    let lastTimeStamp = performance.now();\r\n    GameState.cancelNextRequest = false;\r\n\r\n    this.myKeyboard.register(\" \", this.checkHandler);\r\n    function gameLoop(time) {\r\n      self.processInput(time - lastTimeStamp);\r\n      self.update(time - lastTimeStamp);\r\n      lastTimeStamp = time;\r\n      self.render();\r\n      if (!GameState.cancelNextRequest) {\r\n        requestAnimationFrame(gameLoop);\r\n      } else {\r\n        context.font = \"70px roboto\";\r\n        context.textAlign = \"center\";\r\n        context.fillText(\"Game Over\", canvas.width / 2, canvas.height * 0.8);\r\n        // self.manager.showScreen(\"mainmenu\");\r\n      }\r\n    }\r\n    requestAnimationFrame(gameLoop);\r\n  }\r\n}\r\n"],"file":"game-play.dev.js"}